<!doctype html><html lang=en>
<head>
<title>K Home Wrts :: SiliconForest RC3 Nowhere</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="K-Home-WRTs The concept of router freedom in South Korea is&amp;hellip; well, not actively discussed in this moment. The following figure is copied from BEREC report explaining the network termination point. While using self-bought modem is &amp;ldquo;technically&amp;rdquo; possible, but this happens very seldom in reality and the modem is supplied by the ISP at a lower rate or even for free, regardless of the type of last mile (e.g. DOCSIS, FTTx, ethernet).">
<meta name=keywords content=",">
<meta name=robots content="noodp">
<link rel=canonical href=https://pages.nowhere.rc3.silicon.moe/posts/k-home-wrts/>
<link rel=stylesheet href=https://pages.nowhere.rc3.silicon.moe/assets/style.css>
<link rel=stylesheet href=assets/%25!s%28%3cnil%3e%29.css>
<link rel=apple-touch-icon href=https://pages.nowhere.rc3.silicon.moe/img/apple-touch-icon-192x192.png>
<link rel="shortcut icon" href=https://pages.nowhere.rc3.silicon.moe/img/favicon/orange.png>
<meta name=twitter:card content="summary">
<meta property="og:locale" content="en">
<meta property="og:type" content="article">
<meta property="og:title" content="K Home Wrts">
<meta property="og:description" content="K-Home-WRTs The concept of router freedom in South Korea is&amp;hellip; well, not actively discussed in this moment. The following figure is copied from BEREC report explaining the network termination point. While using self-bought modem is &amp;ldquo;technically&amp;rdquo; possible, but this happens very seldom in reality and the modem is supplied by the ISP at a lower rate or even for free, regardless of the type of last mile (e.g. DOCSIS, FTTx, ethernet).">
<meta property="og:url" content="https://pages.nowhere.rc3.silicon.moe/posts/k-home-wrts/">
<meta property="og:site_name" content="SiliconForest RC3 Nowhere">
<meta property="og:image" content="https://pages.nowhere.rc3.silicon.moe/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">
<meta property="article:published_time" content="2021-12-27 02:35:38 +0900 +0900">
</head>
<body>
<div class="container headings--one-size">
<header class=header>
<div class=header__inner>
<div class=header__logo>
<a href=https://pages.nowhere.rc3.silicon.moe/>
<div class=logo>
Terminal
</div>
</a>
</div>
</div>
</header>
<div class=content>
<div class=post>
<h1 class=post-title>
<a href=https://pages.nowhere.rc3.silicon.moe/posts/k-home-wrts/>K Home Wrts</a></h1>
<div class=post-meta>
<span class=post-date>
2021-12-27
</span>
</div>
<span class=post-tags>
#<a href=https://pages.nowhere.rc3.silicon.moe/tags/></a>&nbsp;
#<a href=https://pages.nowhere.rc3.silicon.moe/tags/></a>&nbsp;
</span>
<div class=post-content><div>
<h1 id=k-home-wrts>K-Home-WRTs<a href=#k-home-wrts class=hanchor arialabel=Anchor>&#8983;</a> </h1>
<p>The concept of <a href=https://fsfe.org/activities/routers/routers.en.html>router freedom</a> in South Korea is&mldr; well, not actively discussed in this moment.
The following figure is copied from BEREC report explaining the network termination point.
While using self-bought modem is &ldquo;technically&rdquo; possible, but this happens very seldom in reality and the modem is supplied by the ISP at a lower rate or even for free, regardless of the type of last mile (e.g. DOCSIS, FTTx, ethernet).
Most of the modems supplied by the ISP does not have an integrated router function, therefore either ISP-supplied router or a self-bought router could be used.
But wait a second&mldr; Ethernet as a last mile?
Most South Koreans lives in an apartment, and some apartment provide an ethernet connection directly to the each households, effectively eliminating any kind of modem and the router is freely choiceable.</p>
<p><img src=../images/ntp.png alt="Illustration of network termination points"></p>
<p>One of the most popular WRT in private households is <a href=https://iptime.com/iptime/>ipTIME</a>, followed by other Korean vendors such as WeVO.
There used be much more smaller Korean vendors selling home WRT, but they got consolidated in the market throughout the last decade.
Other global vendors such as Asus, Belkin, D-Link are usually bought by power users who is not satisfied by performance or software of what ipTIME or other Korean vendors provide, and have limited market presence.
This makes the situation hard in several aspects: local brand WRTs got OpenWrt support only in recent days, while the &ldquo;stock&rdquo; firmware of those WRTs have security holes and patched them in very clever way.</p>
<h2 id=iptime-and-gpl-openwrt>ipTIME and GPL, OpenWrt<a href=#iptime-and-gpl-openwrt class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>ipTIME in year 2007 claimed that &ldquo;it is not fair that the GPL enforcement is harsh on small-sized enterprises&rdquo;<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>, however, they slowly changed their mind and opened up some of their GPLed source codes around 2017.
In addition to this, they used Realtek &ndash; infamous for their non-support status in OpenWrt &ndash; in the past and changed their chipsets to other than Realtek during mid-2010s.
As a result (and lack of general interest), not many devices of ipTIME is listed as supported device of OpenWrt<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.
One exceptional case is FREEZIO<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>, where the company opened up the source code which is based on the OpenWrt.
But as far as we know, not many vendors seems to comply with the terms of GPL.
There are some other Korean WRTs listed in the hardware list of OpenWrt, but these are mostly reverse engineered from the ground and adapted the source code from other routers sharing the same SoCs, as vendors are not usually opening up their code either.</p>
<p>A small number of Korean hackers are doing, and most of them are also hanging out in the Jitsi here, so feel free to ask them about the experience :)</p>
<h2 id=the-home-router-insecurity>The Home Router (In)security<a href=#the-home-router-insecurity class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>We found the input sanitization bug leading to the remote code execution on one of the Korean WRT.
Unfortunately, quite a lot of text field&rsquo;s inputs in the configuration page are piped into the shell scripts of Korean WRTs, and not many vendors take care about proper sanitzation or implement without using shell script.
We have reported the problem to the vendor and KISA (Korea Internet Security Agency) bug bounty program about this problem.
Several vendors have responded in various ü§¶ ways.</p>
<p>One of the vendor just removed the problematic text input field in their next firmware release, citing the feature as auxilary diagnostic function.</p>
<p>One of the vendor have &ldquo;implemented&rdquo; some input text field sanitization method, which looks for known keywords using <code>strchr</code> and <code>strstr</code> function.
Let&rsquo;s see how they implemented this function (and prepare some popcorn for the function&rsquo;s name):</p>
<pre tabindex=0><code>bool check_hacking(char *cmd, int len) {
  /* snip */

  ret = strchr(cmd, ';');
  if (ret != 0) return true;

  ret = strchr(cmd, '|');
  if (ret != 0) return true;

  ret = strchr(cmd, '&amp;');
  if (ret != 0) return true;

  ret = strchr(cmd, '\');
  if (ret != 0) return true;

  ret = strchr(cmd, '`');
  if (ret != 0) return true;

  /* snip */

  ret = strstr(cmd, &quot;wget&quot;);
  if (ret != 0) return true;

  ret = strstr(cmd, &quot;echo&quot;);
  if (ret != 0) return true;

  ret = strstr(cmd, &quot;/bin/&quot;);
  if (ret != 0) return true;

  ret = strstr(cmd, &quot;sh&quot;);
  if (ret != 0) return true;

  /* snip */

  ret = strchr(cmd, '[');
  if (ret != 0) return true;

  ret = strchr(cmd, '&gt;');
  if (ret != 0) return true;

  return false;
}
</code></pre><p>To make things more worse, even we have found the bug in the &ldquo;sanitization&rdquo; method after they had fixed the original problem, the vendor claimed that the product is EOL and no updates will be provided.
We believe that the EOL is just a made-up cause, as the product in question is actively sold in the market when we got the vendor&rsquo;s EOL claim.
What should we do?
We have no idea.</p>
<section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p><a href="https://iptime.com/iptime/?page_id=174&nType=UFFscUh5dURlaTNsU1BwZGlNV2czcWpRb3B1QldXK3Rad3IyazFGNUw5WHZXOHpneCtDN0gvZGpGNjMzQjNxelEzWXMwdEsyRmJuUTJoOU1BQmEwZVhEUFRneEV1bmlDY2hROUlMS2tVZCsrYnFEQVV6cmlnZjNVL3h1aG5HalhoQTlTU1hLRWsrSHJNSDFzVlYzbHhFWnVpUDliVzd1SGc2b3lRYVox">re: Firmware License Î¨∏Ï†ú Î¨∏Ïùò (in Korean)</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:2 role=doc-endnote>
<p><a href="https://openwrt.org/toh/start?dataflt%5BBrand*%7E%5D=iptime">OpenWrt Wiki: Table of Hardware</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:3 role=doc-endnote>
<p><a href=https://github.com/ZIORouter/openwrt_for_mtk>github: ZIORouter/openwrt_for_mtk</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
</div></div>
</div>
</div>
<footer class=footer>
<div class=footer__inner>
<div class=copyright>
<span>¬© 2021 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span>
</div>
</div>
</footer>
<script src=https://pages.nowhere.rc3.silicon.moe/assets/main.js></script>
<script src=https://pages.nowhere.rc3.silicon.moe/assets/prism.js></script>
</div>
</body>
</html>